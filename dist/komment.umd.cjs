(function(y,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(y=typeof globalThis<"u"?globalThis:y||self,e(y.Komment={},y.Vue))})(this,(function(y,e){"use strict";var Ue=Object.defineProperty;var Ae=(y,e,N)=>e in y?Ue(y,e,{enumerable:!0,configurable:!0,writable:!0,value:N}):y[e]=N;var $=(y,e,N)=>Ae(y,typeof e!="symbol"?e+"":e,N);function N(s){const o=e.ref([]),t=e.ref(!1),r=e.ref(null),n=e.ref(null),a=s.apiEndpoint||"http://localhost:3001/api/comments",d=e.computed(()=>window.location.pathname);async function p(f,k){t.value=!0,r.value=null;try{return await f()}catch(u){return r.value=u instanceof Error?u.message:k,console.error(k,u),null}finally{t.value=!1}}async function g(){await p(async()=>{const k=await(await fetch(`${a}?pageUrl=${encodeURIComponent(d.value)}`)).json();if(k.success&&k.data)o.value=k.data;else throw new Error(k.error||"Failed to fetch comments")},"Failed to fetch comments")}async function v(f){return p(async()=>{const u=await(await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)})).json();if(u.success&&u.data)return o.value.push(u.data),u.data;throw new Error(u.error||"Failed to save comment")},"Failed to save comment")}async function m(f,k){return p(async()=>{const h=await(await fetch(`${a}/${f}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:k})})).json();if(h.success&&h.data){const b=o.value.findIndex(V=>V.id===f);return b!==-1&&(o.value[b]=h.data),h.data}else throw new Error(h.error||"Failed to update comment")},"Failed to update comment")}async function i(f){return p(async()=>{const u=await(await fetch(`${a}/${f}`,{method:"DELETE"})).json();if(u.success){const h=o.value.find(b=>b.id===f);return o.value=o.value.filter(b=>b.id!==f),h||null}else throw new Error(u.error||"Failed to delete comment")},"Failed to delete comment")}function w(){if(s.enableLiveUpdates)try{const f=`${a}/stream?pageUrl=${encodeURIComponent(d.value)}`;n.value=new EventSource(f),n.value.addEventListener("comment-added",k=>{const u=JSON.parse(k.data);o.value.find(h=>h.id===u.id)||o.value.push(u)}),n.value.addEventListener("comment-updated",k=>{const u=JSON.parse(k.data),h=o.value.findIndex(b=>b.id===u.id);h!==-1&&(o.value[h]=u)}),n.value.addEventListener("comment-deleted",k=>{const{id:u}=JSON.parse(k.data);o.value=o.value.filter(h=>h.id!==u)}),n.value.onerror=()=>{console.warn("SSE connection error, will retry...")}}catch(f){console.error("Failed to setup live updates:",f)}}function E(){n.value&&(n.value.close(),n.value=null)}return{comments:o,isLoading:t,error:r,fetchComments:g,saveComment:v,updateComment:m,deleteComment:i,setupLiveUpdates:w,cleanup:E}}function Z(s){return!s||s===document.body?void 0:s.id?`#${s.id}`:(t=>{const r=[];let n=t;for(;n&&n!==document.body;){const d=(n.parentElement?Array.from(n.parentElement.children):[]).indexOf(n)+1,p=`${n.tagName.toLowerCase()}:nth-child(${d})`;r.unshift(p),n=n.parentElement}return r})(s).join(" > ")}function ee(s){if(!s)return null;const o=r=>{const{width:n,height:a}=r.getBoundingClientRect(),{display:d,visibility:p,opacity:g}=window.getComputedStyle(r);return n>0&&a>0&&d!=="none"&&p!=="hidden"&&g!=="0"},t=r=>{let n=r;for(;n&&n!==document.body;){if(o(n))return n;n=n.parentElement}return r};try{const r=document.querySelector(s);return r?t(r):null}catch{return null}}const S={POPUP:{width:400,height:300},TOOLTIP:{width:350,height:200},LABEL:{width:120,height:30}},M={USER_NAME:"komment-user-name"},te={TEXTAREA:"komment-textarea"},_={TOOLTIP_HIDE_DELAY:200,DEBOUNCE_DELAY:16},oe={CURSOR_LABEL:15},ne=20,re=10;class se{constructor(o=ne,t=re){$(this,"viewportBounds");$(this,"offset");$(this,"padding");this.viewportBounds={width:window.innerWidth,height:window.innerHeight},this.offset=o,this.padding=t}calculatePopupPosition(o,t){const r=this.toViewportCoords(o);let n=this.offsetPosition(r,this.offset,this.offset);return this.fitsRight(n,t)||(n.x=r.x-t.width-this.offset),this.fitsWithinHorizontalBounds(n.x,t.width)||(n.x=Math.max(this.padding,Math.min(n.x,this.viewportBounds.width-t.width-this.padding))),this.fitsBottom(n,t)||(n.y=r.y-t.height-this.offset),this.fitsWithinVerticalBounds(n.y,t.height)||(n.y=Math.max(this.padding,Math.min(n.y,this.viewportBounds.height-t.height-this.padding))),this.toPageCoords(n)}calculateTooltipOffset(o,t){const r=this.toViewportCoords(o),n=[()=>this.tryRight(r,t),()=>this.tryLeft(r,t),()=>this.tryBelow(r,t),()=>this.tryAbove(r,t)];for(const a of n){const d=a();if(d.fits)return this.formatOffset(d.offset)}return this.formatOffset({x:this.offset,y:0})}calculateLabelPosition(o,t,r=15){const n=o;let a=this.offsetPosition(n,r,r);return this.fitsRight(a,t)||(a.x=n.x-t.width-r),a.x=Math.max(this.padding,Math.min(a.x,this.viewportBounds.width-t.width-this.padding)),this.fitsBottom(a,t)||(a.y=n.y-t.height-r),a.y=Math.max(this.padding,Math.min(a.y,this.viewportBounds.height-t.height-this.padding)),a}tryRight(o,t){const r=o.x+this.offset,n=o.y;return{fits:this.fitsInViewport({x:r,y:n},t),offset:{x:this.offset,y:0}}}tryLeft(o,t){const r=o.x-t.width-this.offset,n=o.y;return{fits:this.fitsInViewport({x:r,y:n},t),offset:{x:-(t.width+this.offset),y:0}}}tryBelow(o,t){const r=o.x-t.width/2,n=o.y+this.offset;return{fits:this.fitsInViewport({x:r,y:n},t),offset:{x:-(t.width/2),y:this.offset}}}tryAbove(o,t){const r=o.x-t.width/2,n=o.y-t.height-this.offset;return{fits:this.fitsInViewport({x:r,y:n},t),offset:{x:-(t.width/2),y:-(t.height+this.offset)}}}fitsInViewport(o,t){return this.fitsWithinHorizontalBounds(o.x,t.width)&&this.fitsWithinVerticalBounds(o.y,t.height)}fitsRight(o,t){return o.x+t.width<=this.viewportBounds.width-this.padding}fitsBottom(o,t){return o.y+t.height<=this.viewportBounds.height-this.padding}fitsWithinHorizontalBounds(o,t){return o>=this.padding&&o+t<=this.viewportBounds.width-this.padding}fitsWithinVerticalBounds(o,t){return o>=this.padding&&o+t<=this.viewportBounds.height-this.padding}offsetPosition(o,t,r){return{x:o.x+t,y:o.y+r}}toViewportCoords(o){return{x:o.x-window.scrollX,y:o.y-window.scrollY}}toPageCoords(o){return{x:o.x+window.scrollX,y:o.y+window.scrollY}}formatOffset(o){return{left:`${o.x}px`,top:`${o.y}px`}}}let O=null;function F(){return O||(O=new se),O}const ae={class:"km:flex km:justify-between km:items-start km:mb-2"},le={class:"km:flex-1"},ie={key:0,class:"km:text-sm km:font-semibold km:text-gray-900"},me={class:"km:text-xs km:text-gray-500"},de={class:"km:text-sm km:text-gray-700 km:whitespace-pre-wrap km:break-words km:mb-2"},ce=e.defineComponent({__name:"CommentMarker",props:{comment:{}},emits:["delete","edit","hover","unhover"],setup(s,{emit:o}){const t=s,r=o,n=F(),a=e.ref(!1),d=e.ref(null),p=e.ref(0),g=e.ref(null),v=e.computed(()=>(p.value,(()=>{if(!t.comment.elementSelector)return null;const C=ee(t.comment.elementSelector);if(!C)return null;const L=C.getBoundingClientRect(),T=t.comment.elementOffset||{x:0,y:0};return{x:L.left+T.x,y:L.top+T.y}})()||{x:t.comment.x,y:t.comment.y})),m=e.computed(()=>n.calculateTooltipOffset(v.value,S.TOOLTIP));function i(B){return new Date(B).toLocaleString()}function w(){r("edit",t.comment),a.value=!1}function E(){confirm("Are you sure you want to delete this comment?")&&r("delete",t.comment.id)}const f=()=>{d.value&&(clearTimeout(d.value),d.value=null)};function k(){f(),a.value=!0,r("hover")}function u(){d.value=window.setTimeout(()=>{a.value=!1,r("unhover"),d.value=null},_.TOOLTIP_HIDE_DELAY)}function h(){f()}function b(){a.value=!1,r("unhover")}const V=()=>{g.value&&clearTimeout(g.value),g.value=window.setTimeout(()=>{p.value++,g.value=null},_.DEBOUNCE_DELAY)},A=()=>{p.value++};return e.onMounted(()=>{window.addEventListener("resize",V),window.addEventListener("scroll",V,!0),A()}),e.onUnmounted(()=>{f(),g.value&&clearTimeout(g.value),window.removeEventListener("resize",V),window.removeEventListener("scroll",V,!0)}),(B,C)=>(e.openBlock(),e.createElementBlock("div",{class:"km:fixed km:z-[9997]",style:e.normalizeStyle({left:`${v.value.x}px`,top:`${v.value.y}px`,transform:"translate(-50%, -50%)"}),onMouseenter:k,onMouseleave:u},[e.createElementVNode("div",{class:"km:w-8 km:h-8 km:bg-blue-500 km:rounded-full km:shadow-lg km:cursor-pointer km:flex km:items-center km:justify-center km:text-white km:font-bold km:text-sm km:hover:scale-110 km:transition-transform",onClick:w},[...C[0]||(C[0]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"km:w-5 km:h-5",viewBox:"0 0 20 20",fill:"currentColor"},[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M18 10c0 3.866-3.582 8-8 8s-8-4.134-8-8 3.582-8 8-8 8 4.134 8 8zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)])]),e.createVNode(e.Transition,{"enter-active-class":"km:transition km:duration-200 km:ease-out","enter-from-class":"km:opacity-0 km:scale-95","enter-to-class":"km:opacity-100 km:scale-100","leave-active-class":"km:transition km:duration-100 km:ease-in","leave-from-class":"km:opacity-100 km:scale-100","leave-to-class":"km:opacity-0 km:scale-95"},{default:e.withCtx(()=>[a.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"km:absolute km:z-[9998] km:min-w-[250px] km:max-w-[350px] km:bg-white km:rounded-lg km:shadow-xl km:p-4 km:border km:border-gray-200 km:cursor-pointer",style:e.normalizeStyle({left:m.value.left,top:m.value.top}),onClick:e.withModifiers(w,["stop"]),onMouseenter:h,onMouseleave:b},[e.createElementVNode("div",ae,[e.createElementVNode("div",le,[s.comment.author?(e.openBlock(),e.createElementBlock("div",ie,e.toDisplayString(s.comment.author),1)):e.createCommentVNode("",!0),e.createElementVNode("div",me,e.toDisplayString(i(s.comment.timestamp)),1)]),e.createElementVNode("button",{onClick:e.withModifiers(E,["stop"]),class:"km:text-gray-400 km:cursor-pointer km:hover:text-red-500 km:transition-colors km:p-1",title:"Delete comment"},[...C[1]||(C[1]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"km:h-5 km:w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)])])]),e.createElementVNode("div",de,e.toDisplayString(s.comment.text),1)],36)):e.createCommentVNode("",!0)]),_:1})],36))}}),U=(s,o)=>{const t=s.__vccOpts||s;for(const[r,n]of o)t[r]=n;return t},K=U(ce,[["__scopeId","data-v-33964e7b"]]),ue=["disabled"],fe={class:"km:flex km:justify-end km:gap-2 km:mt-4"},ke=["disabled"],pe=["disabled"],j=U(e.defineComponent({__name:"CommentPopup",props:{modelValue:{},position:{},isLoading:{type:Boolean}},emits:["update:modelValue","save","cancel","hover","unhover"],setup(s,{emit:o}){const t=s,r=o,n=e.ref(null),a=e.ref(null),d=e.ref(t.modelValue);e.watch(()=>t.modelValue,m=>{d.value=m}),e.watch(d,m=>{r("update:modelValue",m),p()});function p(){e.nextTick(()=>{n.value&&(n.value.style.height="auto",n.value.style.height=`${n.value.scrollHeight}px`)})}function g(m){a.value&&!a.value.contains(m.target)&&r("cancel")}function v(m){m.key==="Escape"?r("cancel"):m.key==="Enter"&&(m.metaKey||m.ctrlKey)&&r("save")}return e.onMounted(()=>{document.addEventListener("mousedown",g),document.addEventListener("keydown",v),e.nextTick(()=>{var m;(m=n.value)==null||m.focus()})}),e.onUnmounted(()=>{document.removeEventListener("mousedown",g),document.removeEventListener("keydown",v)}),(m,i)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"popupRef",ref:a,class:"km:fixed km:z-[10000] km:bg-white km:rounded-lg km:shadow-2xl km:p-4 km:border km:border-gray-200 km:min-w-[320px] km:max-w-[400px]",style:e.normalizeStyle({left:`${s.position.x}px`,top:`${s.position.y}px`}),onMouseenter:i[3]||(i[3]=w=>r("hover")),onMouseleave:i[4]||(i[4]=w=>r("unhover"))},[i[5]||(i[5]=e.createElementVNode("div",{class:"km:mb-3"},[e.createElementVNode("h3",{class:"km:text-sm km:font-semibold km:text-gray-900"},"Add Comment"),e.createElementVNode("p",{class:"km:text-xs km:text-gray-500 km:mt-1"}," Enter your feedback or comment below ")],-1)),e.withDirectives(e.createElementVNode("textarea",{ref_key:"textareaRef",ref:n,"onUpdate:modelValue":i[0]||(i[0]=w=>d.value=w),class:"komment-textarea km:w-full km:px-3 km:py-2 km:border km:border-gray-300 km:rounded-md km:text-sm km:text-gray-900 km:resize-none focus:km:outline-none focus:km:ring-2 focus:km:ring-blue-500 focus:km:border-transparent km:min-h-[80px] km:max-h-[300px]",placeholder:"Type your comment here...",disabled:s.isLoading},null,8,ue),[[e.vModelText,d.value]]),i[6]||(i[6]=e.createElementVNode("div",{class:"km:text-xs km:text-gray-400 km:mt-2"},[e.createElementVNode("kbd",{class:"km:px-1 km:py-0.5 km:bg-gray-100 km:rounded km:border km:border-gray-300"},"Esc"),e.createTextVNode(" to cancel, "),e.createElementVNode("kbd",{class:"km:px-1 km:py-0.5 km:bg-gray-100 km:rounded km:border km:border-gray-300"},"Cmd/Ctrl+Enter"),e.createTextVNode(" to save ")],-1)),e.createElementVNode("div",fe,[e.createElementVNode("button",{onClick:i[1]||(i[1]=w=>r("cancel")),disabled:s.isLoading,class:"km:px-4 km:py-2 km:text-sm km:font-medium km:text-gray-700 km:bg-white km:border km:border-gray-300 km:rounded-md km:cursor-pointer km:hover:bg-gray-50 focus:km:outline-none focus:km:ring-2 focus:km:ring-offset-2 focus:km:ring-blue-500 disabled:km:opacity-50 disabled:km:cursor-not-allowed km:transition-colors"}," Cancel ",8,ke),e.createElementVNode("button",{onClick:i[2]||(i[2]=w=>r("save")),disabled:s.isLoading||!d.value.trim(),class:"km:px-4 km:py-2 km:text-sm km:font-medium km:text-white km:bg-blue-500 km:border km:border-transparent km:rounded-md km:cursor-pointer km:hover:bg-blue-600 focus:km:outline-none focus:km:ring-2 focus:km:ring-offset-2 focus:km:ring-blue-500 disabled:km:opacity-50 disabled:km:cursor-not-allowed km:transition-colors"},e.toDisplayString(s.isLoading?"Saving...":"Save"),9,pe)])],36))}}),[["__scopeId","data-v-839823fb"]]);function H(s,o=""){try{const t=localStorage.getItem(s);return t!==null?t:o}catch(t){return console.warn(`Failed to read from localStorage (key: ${s}):`,t),o}}function he(s,o){try{return localStorage.setItem(s,o),!0}catch(t){return console.warn(`Failed to write to localStorage (key: ${s}):`,t),!1}}const ye={key:0,class:"komment-container"},ge={key:3,class:"km:fixed km:bottom-20 km:right-4 km:z-[10001] km:px-4 km:py-3 km:bg-red-500 km:text-white km:rounded km:shadow-lg"},xe={key:4,class:"km:fixed km:inset-0 km:z-[10002] km:flex km:items-center km:justify-center km:bg-black/50"},we={class:"km:bg-white km:rounded-lg km:shadow-2xl km:p-6 km:max-w-md km:w-full km:mx-4"},ve={class:"km:flex km:justify-end km:gap-2"},be=["disabled"],Ee={key:5,class:"km:fixed km:bottom-4 km:left-4 km:z-[9999] km:bg-white km:rounded-lg km:shadow-md km:px-3 km:py-2 km:flex km:items-center km:gap-2"},Ce={class:"km:text-sm km:text-gray-700"},Y=U(e.defineComponent({__name:"Komment",props:{apiEndpoint:{default:"http://localhost:3001/api/comments"},autoEnable:{type:Boolean,default:!0},forceEnable:{type:Boolean,default:!1},author:{},enableLiveUpdates:{type:Boolean,default:!0},buttonPosition:{default:"bottom-right"}},setup(s){const o=s,t=F(),r=e.ref(!1),n=e.ref(!1),a=e.ref(!1),d=e.ref(!1),p=e.ref({x:0,y:0}),g=e.ref({x:0,y:0}),v=e.ref({x:0,y:0}),m=e.ref(""),i=e.ref(""),w=e.ref(null),E=e.ref(!1),f=e.ref({}),{comments:k,isLoading:u,error:h,fetchComments:b,saveComment:V,updateComment:A,deleteComment:B,setupLiveUpdates:C,cleanup:L}=N(o),T=e.computed(()=>o.forceEnable?!0:o.autoEnable?process.env.NODE_ENV!=="production":!1),Ve=e.computed(()=>n.value?"Finish":"Comment"),Ne=e.computed(()=>({"top-left":"km:fixed km:top-4 km:left-4","top-right":"km:fixed km:top-4 km:right-4","bottom-left":"km:fixed km:bottom-4 km:left-4","bottom-right":"km:fixed km:bottom-4 km:right-4"})[o.buttonPosition]),X=e.computed(()=>i.value||o.author||"Anonymous");function Be(){n.value=!n.value,n.value?(!H(M.USER_NAME)&&!i.value&&(d.value=!0),document.body.style.overflow="hidden",document.addEventListener("mousemove",I)):(document.body.style.overflow="",document.removeEventListener("mousemove",I),a.value=!1,m.value="")}function I(l){g.value={x:l.clientX,y:l.clientY},v.value=t.calculateLabelPosition(g.value,S.LABEL,oe.CURSOR_LABEL)}function Se(l){if(!n.value)return;const c=()=>{const x=l.target,z=x.style.pointerEvents;x.style.pointerEvents="none";const P=document.elementFromPoint(l.clientX,l.clientY);if(x.style.pointerEvents=z,(R=>R?R.closest("#komment-root")!==null||R.id==="komment-root":!1)(P))return{selector:void 0,offset:void 0};const G=Z(P);if(!P)return{selector:G};const Q=P.getBoundingClientRect();return{selector:G,offset:{x:l.clientX-Q.left,y:l.clientY-Q.top}}};f.value=c(),p.value=t.calculatePopupPosition({x:l.clientX,y:l.clientY},S.POPUP),a.value=!0,q()}async function Le(){if(m.value.trim())if(w.value)await A(w.value,m.value.trim())&&D();else{const l={x:p.value.x,y:p.value.y,text:m.value.trim(),author:X.value,pageUrl:window.location.pathname,elementSelector:f.value.selector,elementOffset:f.value.offset};await V(l)&&(D(),f.value={})}}function Te(){const l=H(M.USER_NAME);if(l){i.value=l;return}d.value=!0}function J(l){i.value=l,he(M.USER_NAME,l),d.value=!1}function Pe(){d.value=!0}function q(){e.nextTick(()=>{var l;(l=document.querySelector(`.${te.TEXTAREA}`))==null||l.focus()})}function D(){a.value=!1,m.value="",w.value=null}function $e(){D()}function Me(l){p.value=t.calculatePopupPosition({x:l.x,y:l.y},S.POPUP),m.value=l.text,w.value=l.id,a.value=!0,q()}function Oe(l){B(l)}return e.onMounted(async()=>{T.value&&(r.value=!0,Te(),await b(),C())}),e.onUnmounted(()=>{L(),document.removeEventListener("mousemove",I),document.body.style.overflow=""}),(l,c)=>r.value?(e.openBlock(),e.createElementBlock("div",ye,[e.createElementVNode("button",{onClick:Be,onMouseenter:c[0]||(c[0]=x=>E.value=!0),onMouseleave:c[1]||(c[1]=x=>E.value=!1),class:e.normalizeClass(["km:z-[9999] km:px-6 km:py-3 km:rounded-full km:shadow-lg km:cursor-pointer","km:font-semibold km:text-white km:transition-all km:duration-200","km:hover:scale-105 km:focus:outline-none km:focus:ring-2 km:focus:ring-offset-2",n.value?"km:bg-red-500 km:hover:bg-red-600 km:focus:ring-red-500":"km:bg-blue-500 km:hover:bg-blue-600 km:focus:ring-blue-500",Ne.value])},e.toDisplayString(Ve.value),35),n.value?(e.openBlock(),e.createElementBlock("div",{key:0,onClick:Se,class:e.normalizeClass(["km:fixed km:inset-0 km:z-[9995] km:bg-white/30","km:cursor-crosshair km:**:cursor-crosshair"])},[!a.value&&!E.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"km:fixed km:pointer-events-none km:z-[9999] km:px-3 km:py-1 km:bg-gray-900 km:text-white km:text-sm km:rounded km:shadow-lg",style:e.normalizeStyle({left:`${v.value.x}px`,top:`${v.value.y}px`})}," add comment ",4)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),n.value?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(e.unref(k),x=>(e.openBlock(),e.createBlock(K,{key:x.id,comment:x,onDelete:Oe,onEdit:Me,onHover:c[2]||(c[2]=z=>E.value=!0),onUnhover:c[3]||(c[3]=z=>E.value=!1)},null,8,["comment"]))),128)):e.createCommentVNode("",!0),a.value?(e.openBlock(),e.createBlock(j,{key:2,modelValue:m.value,"onUpdate:modelValue":c[4]||(c[4]=x=>m.value=x),position:p.value,"is-loading":e.unref(u),onSave:Le,onCancel:$e,onHover:c[5]||(c[5]=x=>E.value=!0),onUnhover:c[6]||(c[6]=x=>E.value=!1)},null,8,["modelValue","position","is-loading"])):e.createCommentVNode("",!0),e.unref(h)?(e.openBlock(),e.createElementBlock("div",ge,e.toDisplayString(e.unref(h)),1)):e.createCommentVNode("",!0),d.value?(e.openBlock(),e.createElementBlock("div",xe,[e.createElementVNode("div",we,[c[10]||(c[10]=e.createElementVNode("h2",{class:"km:text-xl km:font-bold km:text-gray-900 km:mb-2"}," Welcome to Komment! ",-1)),c[11]||(c[11]=e.createElementVNode("p",{class:"km:text-sm km:text-gray-600 km:mb-4"}," Please enter your name to start commenting: ",-1)),e.withDirectives(e.createElementVNode("input",{ref:"nameInput","onUpdate:modelValue":c[7]||(c[7]=x=>i.value=x),type:"text",placeholder:"Your name...",class:"km:w-full km:px-3 km:py-2 km:border km:border-gray-300 km:rounded-md km:text-sm km:focus:outline-none km:focus:ring-2 km:focus:ring-blue-500 km:mb-4",onKeyup:c[8]||(c[8]=e.withKeys(x=>i.value.trim()&&J(i.value.trim()),["enter"]))},null,544),[[e.vModelText,i.value]]),e.createElementVNode("div",ve,[e.createElementVNode("button",{onClick:c[9]||(c[9]=x=>J(i.value.trim()||"Anonymous")),disabled:!i.value.trim(),class:"km:px-4 km:py-2 km:text-sm km:font-medium km:text-white km:bg-blue-500 km:border km:border-transparent km:rounded-md km:cursor-pointer km:hover:bg-blue-600 km:focus:outline-none km:focus:ring-2 km:focus:ring-offset-2 km:focus:ring-blue-500 disabled:km:opacity-50 disabled:km:cursor-not-allowed km:transition-colors"}," Start Commenting ",8,be)])])])):e.createCommentVNode("",!0),n.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Ee,[e.createElementVNode("span",Ce,e.toDisplayString(X.value),1),e.createElementVNode("button",{onClick:Pe,class:"km:text-xs km:text-blue-500 km:cursor-pointer km:hover:text-blue-700 km:underline",title:"Change name"}," change ")]))])):e.createCommentVNode("",!0)}}),[["__scopeId","data-v-6c330a25"]]);function W(s={}){return{install(o){const t=document.createElement("div");t.id="komment-root",document.body.appendChild(t);const r=e.createApp({render(){return e.h(Y,s)}});r.mount(t),o.config.globalProperties.$komment=r}}}y.CommentMarker=K,y.CommentPopup=j,y.Komment=Y,y.KommentPlugin=W,y.createKomment=W,y.useComments=N,Object.defineProperty(y,Symbol.toStringTag,{value:"Module"})}));
