(function(h,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(h=typeof globalThis<"u"?globalThis:h||self,e(h.Komment={},h.Vue))})(this,(function(h,e){"use strict";var Ce=Object.defineProperty;var Ve=(h,e,C)=>e in h?Ce(h,e,{enumerable:!0,configurable:!0,writable:!0,value:C}):h[e]=C;var T=(h,e,C)=>Ve(h,typeof e!="symbol"?e+"":e,C);function C(a){const n=e.ref([]),t=e.ref(!1),r=e.ref(null),o=e.ref(null),i=a.apiEndpoint||"http://localhost:3001/api/comments",u=e.computed(()=>window.location.pathname);async function g(){t.value=!0,r.value=null;try{const f=await(await fetch(`${i}?pageUrl=${encodeURIComponent(u.value)}`)).json();if(f.success&&f.data)n.value=f.data;else throw new Error(f.error||"Failed to fetch comments")}catch(d){r.value=d instanceof Error?d.message:"Unknown error",console.error("Failed to fetch comments:",d)}finally{t.value=!1}}async function w(d){t.value=!0,r.value=null;try{const k=await(await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})).json();if(k.success&&k.data)return n.value.push(k.data),k.data;throw new Error(k.error||"Failed to save comment")}catch(f){return r.value=f instanceof Error?f.message:"Unknown error",console.error("Failed to save comment:",f),null}finally{t.value=!1}}async function v(d,f){t.value=!0,r.value=null;try{const y=await(await fetch(`${i}/${d}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:f})})).json();if(y.success&&y.data){const E=n.value.findIndex(V=>V.id===d);return E!==-1&&(n.value[E]=y.data),y.data}else throw new Error(y.error||"Failed to update comment")}catch(k){return r.value=k instanceof Error?k.message:"Unknown error",console.error("Failed to update comment:",k),null}finally{t.value=!1}}async function m(d){try{return(await(await fetch(`${i}/${d}`,{method:"DELETE"})).json()).success?(n.value=n.value.filter(y=>y.id!==d),!0):!1}catch(f){return console.error("Failed to delete comment:",f),!1}}function l(){if(a.enableLiveUpdates)try{const d=`${i}/stream?pageUrl=${encodeURIComponent(u.value)}`;o.value=new EventSource(d),o.value.addEventListener("comment-added",f=>{const k=JSON.parse(f.data);n.value.find(y=>y.id===k.id)||n.value.push(k)}),o.value.addEventListener("comment-updated",f=>{const k=JSON.parse(f.data),y=n.value.findIndex(E=>E.id===k.id);y!==-1&&(n.value[y]=k)}),o.value.addEventListener("comment-deleted",f=>{const{id:k}=JSON.parse(f.data);n.value=n.value.filter(y=>y.id!==k)}),o.value.onerror=()=>{console.warn("SSE connection error, will retry...")}}catch(d){console.error("Failed to setup live updates:",d)}}function x(){o.value&&(o.value.close(),o.value=null)}return{comments:n,isLoading:t,error:r,fetchComments:g,saveComment:w,updateComment:v,deleteComment:m,setupLiveUpdates:l,cleanup:x}}function K(a){return!a||a===document.body?void 0:a.id?`#${a.id}`:(t=>{const r=[];let o=t;for(;o&&o!==document.body;){const u=(o.parentElement?Array.from(o.parentElement.children):[]).indexOf(o)+1,g=`${o.tagName.toLowerCase()}:nth-child(${u})`;r.unshift(g),o=o.parentElement}return r})(a).join(" > ")}function H(a){if(!a)return null;const n=r=>{const{width:o,height:i}=r.getBoundingClientRect(),{display:u,visibility:g,opacity:w}=window.getComputedStyle(r);return o>0&&i>0&&u!=="none"&&g!=="hidden"&&w!=="0"},t=r=>{let o=r;for(;o&&o!==document.body;){if(n(o))return o;o=o.parentElement}return r};try{const r=document.querySelector(a);return r?t(r):null}catch{return null}}const X=20,Y=10;class O{constructor(n=X,t=Y){T(this,"viewportBounds");T(this,"offset");T(this,"padding");this.viewportBounds={width:window.innerWidth,height:window.innerHeight},this.offset=n,this.padding=t}calculatePopupPosition(n,t){const r=this.toViewportCoords(n);let o=this.offsetPosition(r,this.offset,this.offset);return this.fitsRight(o,t)||(o.x=r.x-t.width-this.offset),this.fitsWithinHorizontalBounds(o.x,t.width)||(o.x=Math.max(this.padding,Math.min(o.x,this.viewportBounds.width-t.width-this.padding))),this.fitsBottom(o,t)||(o.y=r.y-t.height-this.offset),this.fitsWithinVerticalBounds(o.y,t.height)||(o.y=Math.max(this.padding,Math.min(o.y,this.viewportBounds.height-t.height-this.padding))),this.toPageCoords(o)}calculateTooltipOffset(n,t){const r=this.toViewportCoords(n),o=[()=>this.tryRight(r,t),()=>this.tryLeft(r,t),()=>this.tryBelow(r,t),()=>this.tryAbove(r,t)];for(const i of o){const u=i();if(u.fits)return this.formatOffset(u.offset)}return this.formatOffset({x:this.offset,y:0})}calculateLabelPosition(n,t){const r=n;let o=this.offsetPosition(r,15,15);return this.fitsRight(o,t)||(o.x=r.x-t.width-15),o.x=Math.max(this.padding,Math.min(o.x,this.viewportBounds.width-t.width-this.padding)),this.fitsBottom(o,t)||(o.y=r.y-t.height-15),o.y=Math.max(this.padding,Math.min(o.y,this.viewportBounds.height-t.height-this.padding)),o}tryRight(n,t){const r=n.x+this.offset,o=n.y;return{fits:this.fitsInViewport({x:r,y:o},t),offset:{x:this.offset,y:0}}}tryLeft(n,t){const r=n.x-t.width-this.offset,o=n.y;return{fits:this.fitsInViewport({x:r,y:o},t),offset:{x:-(t.width+this.offset),y:0}}}tryBelow(n,t){const r=n.x-t.width/2,o=n.y+this.offset;return{fits:this.fitsInViewport({x:r,y:o},t),offset:{x:-(t.width/2),y:this.offset}}}tryAbove(n,t){const r=n.x-t.width/2,o=n.y-t.height-this.offset;return{fits:this.fitsInViewport({x:r,y:o},t),offset:{x:-(t.width/2),y:-(t.height+this.offset)}}}fitsInViewport(n,t){return this.fitsWithinHorizontalBounds(n.x,t.width)&&this.fitsWithinVerticalBounds(n.y,t.height)}fitsRight(n,t){return n.x+t.width<=this.viewportBounds.width-this.padding}fitsBottom(n,t){return n.y+t.height<=this.viewportBounds.height-this.padding}fitsWithinHorizontalBounds(n,t){return n>=this.padding&&n+t<=this.viewportBounds.width-this.padding}fitsWithinVerticalBounds(n,t){return n>=this.padding&&n+t<=this.viewportBounds.height-this.padding}offsetPosition(n,t,r){return{x:n.x+t,y:n.y+r}}toViewportCoords(n){return{x:n.x-window.scrollX,y:n.y-window.scrollY}}toPageCoords(n){return{x:n.x+window.scrollX,y:n.y+window.scrollY}}formatOffset(n){return{left:`${n.x}px`,top:`${n.y}px`}}}const B={POPUP:{width:400,height:300},TOOLTIP:{width:350,height:200},LABEL:{width:120,height:30}},L={USER_NAME:"komment-user-name"},A={TEXTAREA:"komment-textarea"},W={class:"km:flex km:justify-between km:items-start km:mb-2"},J={class:"km:flex-1"},q={key:0,class:"km:text-sm km:font-semibold km:text-gray-900"},G={class:"km:text-xs km:text-gray-500"},Q={class:"km:text-sm km:text-gray-700 km:whitespace-pre-wrap km:break-words km:mb-2"},Z=e.defineComponent({__name:"CommentMarker",props:{comment:{}},emits:["delete","edit","hover","unhover"],setup(a,{emit:n}){const t=a,r=n,o=new O,i=e.ref(!1),u=e.ref(null),g=e.ref(0),w=e.computed(()=>(g.value,(()=>{if(!t.comment.elementSelector)return null;const b=H(t.comment.elementSelector);if(!b)return null;const S=b.getBoundingClientRect(),P=t.comment.elementOffset||{x:0,y:0};return{x:S.left+P.x+window.scrollX,y:S.top+P.y+window.scrollY}})()||{x:t.comment.x,y:t.comment.y})),v=e.computed(()=>o.calculateTooltipOffset(w.value,B.TOOLTIP));function m(N){return new Date(N).toLocaleString()}function l(){r("edit",t.comment),i.value=!1}function x(){confirm("Are you sure you want to delete this comment?")&&r("delete",t.comment.id)}const d=()=>{u.value&&(clearTimeout(u.value),u.value=null)};function f(){d(),i.value=!0,r("hover")}function k(){u.value=window.setTimeout(()=>{i.value=!1,r("unhover"),u.value=null},200)}function y(){d()}function E(){i.value=!1,r("unhover")}const V=()=>g.value++;return e.onMounted(()=>{window.addEventListener("resize",V),V()}),e.onUnmounted(()=>{d(),window.removeEventListener("resize",V)}),(N,b)=>(e.openBlock(),e.createElementBlock("div",{class:"km:absolute km:z-[9997]",style:e.normalizeStyle({left:`${w.value.x}px`,top:`${w.value.y}px`,transform:"translate(-50%, -50%)"}),onMouseenter:f,onMouseleave:k},[e.createElementVNode("div",{class:"km:w-8 km:h-8 km:bg-blue-500 km:rounded-full km:shadow-lg km:cursor-pointer km:flex km:items-center km:justify-center km:text-white km:font-bold km:text-sm km:hover:scale-110 km:transition-transform",onClick:l},[...b[0]||(b[0]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"km:w-5 km:h-5",viewBox:"0 0 20 20",fill:"currentColor"},[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M18 10c0 3.866-3.582 8-8 8s-8-4.134-8-8 3.582-8 8-8 8 4.134 8 8zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)])]),e.createVNode(e.Transition,{"enter-active-class":"km:transition km:duration-200 km:ease-out","enter-from-class":"km:opacity-0 km:scale-95","enter-to-class":"km:opacity-100 km:scale-100","leave-active-class":"km:transition km:duration-100 km:ease-in","leave-from-class":"km:opacity-100 km:scale-100","leave-to-class":"km:opacity-0 km:scale-95"},{default:e.withCtx(()=>[i.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"km:absolute km:z-[9998] km:min-w-[250px] km:max-w-[350px] km:bg-white km:rounded-lg km:shadow-xl km:p-4 km:border km:border-gray-200 km:cursor-pointer",style:e.normalizeStyle({left:v.value.left,top:v.value.top}),onClick:e.withModifiers(l,["stop"]),onMouseenter:y,onMouseleave:E},[e.createElementVNode("div",W,[e.createElementVNode("div",J,[a.comment.author?(e.openBlock(),e.createElementBlock("div",q,e.toDisplayString(a.comment.author),1)):e.createCommentVNode("",!0),e.createElementVNode("div",G,e.toDisplayString(m(a.comment.timestamp)),1)]),e.createElementVNode("button",{onClick:e.withModifiers(x,["stop"]),class:"km:text-gray-400 km:cursor-pointer km:hover:text-red-500 km:transition-colors km:p-1",title:"Delete comment"},[...b[1]||(b[1]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"km:h-5 km:w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)])])]),e.createElementVNode("div",Q,e.toDisplayString(a.comment.text),1)],36)):e.createCommentVNode("",!0)]),_:1})],36))}}),M=(a,n)=>{const t=a.__vccOpts||a;for(const[r,o]of n)t[r]=o;return t},z=M(Z,[["__scopeId","data-v-ef945c0b"]]),ee=["disabled"],te={class:"km:flex km:justify-end km:gap-2 km:mt-4"},oe=["disabled"],ne=["disabled"],I=M(e.defineComponent({__name:"CommentPopup",props:{modelValue:{},position:{},isLoading:{type:Boolean}},emits:["update:modelValue","save","cancel","hover","unhover"],setup(a,{emit:n}){const t=a,r=n,o=e.ref(null),i=e.ref(null),u=e.ref(t.modelValue);e.watch(()=>t.modelValue,m=>{u.value=m}),e.watch(u,m=>{r("update:modelValue",m),g()});function g(){e.nextTick(()=>{o.value&&(o.value.style.height="auto",o.value.style.height=`${o.value.scrollHeight}px`)})}function w(m){i.value&&!i.value.contains(m.target)&&r("cancel")}function v(m){m.key==="Escape"?r("cancel"):m.key==="Enter"&&(m.metaKey||m.ctrlKey)&&r("save")}return e.onMounted(()=>{document.addEventListener("mousedown",w),document.addEventListener("keydown",v),e.nextTick(()=>{var m;(m=o.value)==null||m.focus()})}),e.onUnmounted(()=>{document.removeEventListener("mousedown",w),document.removeEventListener("keydown",v)}),(m,l)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"popupRef",ref:i,class:"km:fixed km:z-[10000] km:bg-white km:rounded-lg km:shadow-2xl km:p-4 km:border km:border-gray-200 km:min-w-[320px] km:max-w-[400px]",style:e.normalizeStyle({left:`${a.position.x}px`,top:`${a.position.y}px`}),onMouseenter:l[3]||(l[3]=x=>r("hover")),onMouseleave:l[4]||(l[4]=x=>r("unhover"))},[l[5]||(l[5]=e.createElementVNode("div",{class:"km:mb-3"},[e.createElementVNode("h3",{class:"km:text-sm km:font-semibold km:text-gray-900"},"Add Comment"),e.createElementVNode("p",{class:"km:text-xs km:text-gray-500 km:mt-1"}," Enter your feedback or comment below ")],-1)),e.withDirectives(e.createElementVNode("textarea",{ref_key:"textareaRef",ref:o,"onUpdate:modelValue":l[0]||(l[0]=x=>u.value=x),class:"komment-textarea km:w-full km:px-3 km:py-2 km:border km:border-gray-300 km:rounded-md km:text-sm km:text-gray-900 km:resize-none focus:km:outline-none focus:km:ring-2 focus:km:ring-blue-500 focus:km:border-transparent km:min-h-[80px] km:max-h-[300px]",placeholder:"Type your comment here...",disabled:a.isLoading},null,8,ee),[[e.vModelText,u.value]]),l[6]||(l[6]=e.createElementVNode("div",{class:"km:text-xs km:text-gray-400 km:mt-2"},[e.createElementVNode("kbd",{class:"km:px-1 km:py-0.5 km:bg-gray-100 km:rounded km:border km:border-gray-300"},"Esc"),e.createTextVNode(" to cancel, "),e.createElementVNode("kbd",{class:"km:px-1 km:py-0.5 km:bg-gray-100 km:rounded km:border km:border-gray-300"},"Cmd/Ctrl+Enter"),e.createTextVNode(" to save ")],-1)),e.createElementVNode("div",te,[e.createElementVNode("button",{onClick:l[1]||(l[1]=x=>r("cancel")),disabled:a.isLoading,class:"km:px-4 km:py-2 km:text-sm km:font-medium km:text-gray-700 km:bg-white km:border km:border-gray-300 km:rounded-md km:cursor-pointer km:hover:bg-gray-50 focus:km:outline-none focus:km:ring-2 focus:km:ring-offset-2 focus:km:ring-blue-500 disabled:km:opacity-50 disabled:km:cursor-not-allowed km:transition-colors"}," Cancel ",8,oe),e.createElementVNode("button",{onClick:l[2]||(l[2]=x=>r("save")),disabled:a.isLoading||!u.value.trim(),class:"km:px-4 km:py-2 km:text-sm km:font-medium km:text-white km:bg-blue-500 km:border km:border-transparent km:rounded-md km:cursor-pointer km:hover:bg-blue-600 focus:km:outline-none focus:km:ring-2 focus:km:ring-offset-2 focus:km:ring-blue-500 disabled:km:opacity-50 disabled:km:cursor-not-allowed km:transition-colors"},e.toDisplayString(a.isLoading?"Saving...":"Save"),9,ne)])],36))}}),[["__scopeId","data-v-839823fb"]]),re={key:0,class:"komment-container"},ae={key:3,class:"km:fixed km:bottom-20 km:right-4 km:z-[10001] km:px-4 km:py-3 km:bg-red-500 km:text-white km:rounded km:shadow-lg"},le={key:4,class:"km:fixed km:inset-0 km:z-[10002] km:flex km:items-center km:justify-center km:bg-black/50"},se={class:"km:bg-white km:rounded-lg km:shadow-2xl km:p-6 km:max-w-md km:w-full km:mx-4"},ie={class:"km:flex km:justify-end km:gap-2"},me=["disabled"],de={key:5,class:"km:fixed km:bottom-4 km:left-4 km:z-[9999] km:bg-white km:rounded-lg km:shadow-md km:px-3 km:py-2 km:flex km:items-center km:gap-2"},ce={class:"km:text-sm km:text-gray-700"},R=M(e.defineComponent({__name:"Komment",props:{apiEndpoint:{default:"http://localhost:3001/api/comments"},autoEnable:{type:Boolean,default:!0},forceEnable:{type:Boolean,default:!1},author:{},enableLiveUpdates:{type:Boolean,default:!0},buttonPosition:{default:"bottom-right"}},setup(a){const n=a,t=new O,r=e.ref(!1),o=e.ref(!1),i=e.ref(!1),u=e.ref(!1),g=e.ref({x:0,y:0}),w=e.ref({x:0,y:0}),v=e.ref({x:0,y:0}),m=e.ref(""),l=e.ref(""),x=e.ref(null),d=e.ref(!1),f=e.ref({}),{comments:k,isLoading:y,error:E,fetchComments:V,saveComment:N,updateComment:b,deleteComment:S,setupLiveUpdates:P,cleanup:ue}=C(n),fe=e.computed(()=>n.forceEnable?!0:n.autoEnable?process.env.NODE_ENV!=="production":!1),ke=e.computed(()=>o.value?"Finish":"Comment"),pe=e.computed(()=>({"top-left":"km:fixed km:top-4 km:left-4","top-right":"km:fixed km:top-4 km:right-4","bottom-left":"km:fixed km:bottom-4 km:left-4","bottom-right":"km:fixed km:bottom-4 km:right-4"})[n.buttonPosition]),F=e.computed(()=>l.value||n.author||"Anonymous");function he(){o.value=!o.value,o.value?(!localStorage.getItem(L.USER_NAME)&&!l.value&&(u.value=!0),document.body.style.overflow="hidden",document.addEventListener("mousemove",U)):(document.body.style.overflow="",document.removeEventListener("mousemove",U),i.value=!1,m.value="")}function U(c){w.value={x:c.clientX,y:c.clientY},v.value=t.calculateLabelPosition(w.value,B.LABEL)}function ye(c){if(!o.value)return;const s=()=>{const p=document.elementFromPoint(c.clientX,c.clientY),$=K(p);if(!p)return{selector:$};const j=p.getBoundingClientRect();return{selector:$,offset:{x:c.clientX-j.left,y:c.clientY-j.top}}};f.value=s(),g.value=t.calculatePopupPosition({x:c.clientX,y:c.clientY},B.POPUP),i.value=!0,e.nextTick(()=>{var p;(p=document.querySelector(`.${A.TEXTAREA}`))==null||p.focus()})}async function ge(){if(m.value.trim())if(x.value)await b(x.value,m.value.trim())&&(i.value=!1,m.value="",x.value=null);else{const c={x:g.value.x,y:g.value.y,text:m.value.trim(),author:F.value,pageUrl:window.location.pathname,elementSelector:f.value.selector,elementOffset:f.value.offset};await N(c)&&(i.value=!1,m.value="",f.value={})}}function xe(){const c=localStorage.getItem(L.USER_NAME);if(c){l.value=c;return}u.value=!0}function _(c){l.value=c,localStorage.setItem(L.USER_NAME,c),u.value=!1}function we(){u.value=!0}function ve(){i.value=!1,m.value="",x.value=null}function be(c){g.value=t.calculatePopupPosition({x:c.x,y:c.y},B.POPUP),m.value=c.text,x.value=c.id,i.value=!0,e.nextTick(()=>{var s;(s=document.querySelector(`.${A.TEXTAREA}`))==null||s.focus()})}function Ee(c){S(c)}return e.onMounted(async()=>{fe.value&&(r.value=!0,xe(),await V(),P())}),e.onUnmounted(()=>{ue(),document.removeEventListener("mousemove",U),document.body.style.overflow=""}),(c,s)=>r.value?(e.openBlock(),e.createElementBlock("div",re,[e.createElementVNode("button",{onClick:he,onMouseenter:s[0]||(s[0]=p=>d.value=!0),onMouseleave:s[1]||(s[1]=p=>d.value=!1),class:e.normalizeClass(["km:z-[9999] km:px-6 km:py-3 km:rounded-full km:shadow-lg km:cursor-pointer","km:font-semibold km:text-white km:transition-all km:duration-200","km:hover:scale-105 km:focus:outline-none km:focus:ring-2 km:focus:ring-offset-2",o.value?"km:bg-red-500 km:hover:bg-red-600 km:focus:ring-red-500":"km:bg-blue-500 km:hover:bg-blue-600 km:focus:ring-blue-500",pe.value])},e.toDisplayString(ke.value),35),o.value?(e.openBlock(),e.createElementBlock("div",{key:0,onClick:ye,class:e.normalizeClass(["km:fixed km:inset-0 km:z-[9995] km:bg-white/30","km:cursor-crosshair km:**:cursor-crosshair"])},[!i.value&&!d.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"km:fixed km:pointer-events-none km:z-[9999] km:px-3 km:py-1 km:bg-gray-900 km:text-white km:text-sm km:rounded km:shadow-lg",style:e.normalizeStyle({left:`${v.value.x}px`,top:`${v.value.y}px`})}," add comment ",4)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),o.value?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(e.unref(k),p=>(e.openBlock(),e.createBlock(z,{key:p.id,comment:p,onDelete:Ee,onEdit:be,onHover:s[2]||(s[2]=$=>d.value=!0),onUnhover:s[3]||(s[3]=$=>d.value=!1)},null,8,["comment"]))),128)):e.createCommentVNode("",!0),i.value?(e.openBlock(),e.createBlock(I,{key:2,modelValue:m.value,"onUpdate:modelValue":s[4]||(s[4]=p=>m.value=p),position:g.value,"is-loading":e.unref(y),onSave:ge,onCancel:ve,onHover:s[5]||(s[5]=p=>d.value=!0),onUnhover:s[6]||(s[6]=p=>d.value=!1)},null,8,["modelValue","position","is-loading"])):e.createCommentVNode("",!0),e.unref(E)?(e.openBlock(),e.createElementBlock("div",ae,e.toDisplayString(e.unref(E)),1)):e.createCommentVNode("",!0),u.value?(e.openBlock(),e.createElementBlock("div",le,[e.createElementVNode("div",se,[s[10]||(s[10]=e.createElementVNode("h2",{class:"km:text-xl km:font-bold km:text-gray-900 km:mb-2"}," Welcome to Komment! ",-1)),s[11]||(s[11]=e.createElementVNode("p",{class:"km:text-sm km:text-gray-600 km:mb-4"}," Please enter your name to start commenting: ",-1)),e.withDirectives(e.createElementVNode("input",{ref:"nameInput","onUpdate:modelValue":s[7]||(s[7]=p=>l.value=p),type:"text",placeholder:"Your name...",class:"km:w-full km:px-3 km:py-2 km:border km:border-gray-300 km:rounded-md km:text-sm km:focus:outline-none km:focus:ring-2 km:focus:ring-blue-500 km:mb-4",onKeyup:s[8]||(s[8]=e.withKeys(p=>l.value.trim()&&_(l.value.trim()),["enter"]))},null,544),[[e.vModelText,l.value]]),e.createElementVNode("div",ie,[e.createElementVNode("button",{onClick:s[9]||(s[9]=p=>_(l.value.trim()||"Anonymous")),disabled:!l.value.trim(),class:"km:px-4 km:py-2 km:text-sm km:font-medium km:text-white km:bg-blue-500 km:border km:border-transparent km:rounded-md km:cursor-pointer km:hover:bg-blue-600 km:focus:outline-none km:focus:ring-2 km:focus:ring-offset-2 km:focus:ring-blue-500 disabled:km:opacity-50 disabled:km:cursor-not-allowed km:transition-colors"}," Start Commenting ",8,me)])])])):e.createCommentVNode("",!0),o.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",de,[e.createElementVNode("span",ce,e.toDisplayString(F.value),1),e.createElementVNode("button",{onClick:we,class:"km:text-xs km:text-blue-500 km:cursor-pointer km:hover:text-blue-700 km:underline",title:"Change name"}," change ")]))])):e.createCommentVNode("",!0)}}),[["__scopeId","data-v-0d8cab6b"]]);function D(a={}){return{install(n){const t=document.createElement("div");t.id="komment-root",document.body.appendChild(t);const r=e.createApp({render(){return e.h(R,a)}});r.mount(t),n.config.globalProperties.$komment=r}}}h.CommentMarker=z,h.CommentPopup=I,h.Komment=R,h.KommentPlugin=D,h.createKomment=D,h.useComments=C,Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})}));
